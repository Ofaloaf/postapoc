# Presidential elections 2.0
# Written by Sam. Feel free to reuse this code anywhere.
namespace = prez

################
# 1-99: Presidential elections
################

# President is dead
character_event = {
	id = prez.1
	desc = DEBUG
	is_triggered_only = yes # Triggered by on_death, on_yearly_pulse
	hide_window = yes
	
	trigger = {
		has_landed_title = c_americanist
		NOT = { has_global_flag = pres_election }
	}
	
	immediate = {
		set_global_flag = pres_election
		set_global_flag = declare_candidacy
		activate_title = { title = c_americanist status = no }
		any_playable_ruler = { # Inform players
			limit = { religion = americanist }
			character_event = { id = prez.3 }
		}
		d_electoral_college = {
			holder_scope = {
				diplomatic_immunity = yes
				add_trait = electoral_college
				set_variable = { which = num_candidates value = 0 }
				character_event = { id = prez.7 days = 30 } # End candidate declaration period
			}
		}
	}
	
	option = {
		name = DEBUG
	}
}

# Check if Presidency is vacant
character_event = {
	id = prez.2
	desc = DEBUG
	is_triggered_only = yes # called from on_yearly_pulse
	hide_window = yes
	
	trigger = {
		c_americanist = { has_holder = no }
		has_landed_title = d_electoral_college
	}
	
	option = {
		name = DEBUG
		character_event = { id = prez.1 }
	}
}

# Notify players of President death
character_event = {
	id = prez.3
	picture = GFX_evt_death
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	desc = {
		text = prez.3.desc
		trigger = { c_americanist = { has_holder = yes } }
	}
	desc = {
		text = prez.3.descB
		trigger = { c_americanist = { has_holder = no } }
	}
	
	option = {
		name = prez.3.optA
		custom_tooltip = { text = prez.3.tooltip }
	}
}

# Notify players of a new candidate
character_event = {
	id = prez.4
	desc = prez.4.desc
	is_triggered_only = yes

	notification = yes
	
	option = {
		name = prez.4.optA
	}
}

# Notify players of a candidate dropping out or dying
character_event = {
	id = prez.5
	desc = {
		text = prez.5.desc
		trigger = { FROM = { is_alive = yes } }
	}
	desc = {
		text = prez.5.descB
		trigger = { FROM = { is_alive = no } }
	}
	is_triggered_only = yes

	notification = yes
	
	option = {
		name = prez.4.optA
	}
}

# Show player all candidates
character_event = {
	id = prez.6
	desc = prez.6.desc
	is_triggered_only = yes
	hide_from = yes
	
	option = {
		name = prez.6.optA
		any_independent_ruler = {
			any_realm_character = {
				limit = {
					religion = americanist
					trait = on_campaign
					has_character_flag = pres_candidate
				}
				custom_tooltip = { text = TOOLTIPPRESIDENTCANDIDATE }
			}
		}
	}
}

# Candidate declaration deadline reached
character_event = {
	id = prez.7
	desc = DEBUG
	is_triggered_only = yes # triggered from prez.1
	hide_window = yes
	
	immediate = {
		clr_global_flag = declare_candidacy
		any_playable_ruler = {
			limit = { religion = americanist }
			character_event = { id = prez.6 }
		}
		character_event = { id = prez.9 days = 30 } # Thin out the field
	}
	
	option = {
		name = DEBUG
	}
}

# Candidate drops out or dies - clear flags, notify player
character_event = {
	id = prez.8
	desc = DEBUG
	is_triggered_only = yes # Triggered from on_death, decision to drop out, other events
	hide_window = yes
	
	trigger = {
		trait = on_campaign
	}
	
	immediate = {
		remove_trait = on_campaign
		d_electoral_college = { holder_scope = { change_variable = { which = num_candidates value = -1 } } }
		any_playable_ruler = { # Inform players
			limit = { religion = americanist }
			character_event = { id = prez.5 days = 1 }
		}
		set_character_flag = dropped_out
		clr_character_flag = pres_candidate
		any_independent_ruler = {
			any_realm_character = {
				limit = {
					trait = on_campaign
					has_character_flag = pres_candidate
				}
				remove_opinion = { modifier = opposing_candidate who = ROOT }
				reverse_remove_opinion = { modifier = opposing_candidate who = ROOT }
			}
		}
	}
	
	option = {
		name = DEBUG
	}
}

# Thin out the field
character_event = {
	id = prez.9
	desc = DEBUG
	is_triggered_only = yes # Triggered by prez.7
	hide_window = yes
	
	option = {
		name = DEBUG
		character_event = { id = prez.89 days = 90 } # Schedule voting
		character_event = { id = prez.10 } # Thin out the field
	}
}

# Loop until there are only 4 candidates.
character_event = {
	id = prez.10
	desc = DEBUG
	is_triggered_only = yes
	hide_window = yes
	
	option = { # More than 4 candidates
		name = DEBUG
		trigger = {
			check_variable = { which = num_candidates value = 4.1 }
			has_global_flag = pres_election
		}
		character_event = { id = prez.10 days = 3 } # Continue loop
		on_campaign = {
			limit = {
				ai = yes
				has_character_flag = pres_candidate
			}
			character_event = { id = prez.205 } # Hold opinion poll
			character_event = { id = prez.11 days = 2 } # After getting poll, decide whether to drop out
		}
	}
	
	option = { # 4 or less candidates
		name = DEBUG
		trigger = {
			OR = {
				NOT = { check_variable = { which = num_candidates value = 4.1 } }
				NOT = { has_global_flag = pres_election }
			}
		}
	}
}

# Decide whether to drop out or not
character_event = {
	id = prez.11
	desc = DEBUG
	is_triggered_only = yes
	hide_window = yes
	
	option = { # Drop out
		name = DEBUG
		ai_chance = {
			factor = 1
			modifier = {
				factor = 5
				has_character_flag = 4th_place
			}
			modifier = {
				factor = 2
				has_character_flag = 3rd_place
			}
			modifier = {
				factor = 2
				d_electoral_college = { holder_scope = { check_variable = { which = num_candidates value = 8 } } }
			}
		}
		character_event = { id = prez.8 }
	}
	option = { # Stay
		name = DEBUG
		ai_chance = {
			factor = 1
			modifier = {
				factor = 5
				has_character_flag = 1st_place
			}
			modifier = {
				factor = 2
				has_character_flag = 2nd_place
			}
		}
	}
}

#### VOTING
# Warn players about upcoming election
character_event = {
	id = prez.89
	desc = DEBUG
	is_triggered_only = yes
	hide_window = yes
	
	option = {
		name = DEBUG
		character_event = { id = prez.91 days = 30 }
		any_playable_ruler = {
			limit = { religion = americanist }
			character_event = { id = prez.90 }
		}
	}
}

# Player warning
character_event = {
	id = prez.90
	desc = prez.90.desc
	picture = GFX_evt_rival_rulers
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	hide_from = yes
	
	option = {
		name = prez.90.optA
	}
}

# Send out ballots
character_event = {
	id = prez.91
	desc = DEBUG
	is_triggered_only = yes
	
	option = {
		name = DEBUG
		on_campaign = {
			limit = {
				has_character_flag = pres_candidate
			}
			save_event_target_as = c1
		}
		on_campaign = {
			limit = {
				has_character_flag = pres_candidate
				NOT = { event_target:c1 = { character = PREV } }
			}
			save_event_target_as = c2
		}
		on_campaign = {
			limit = {
				has_character_flag = pres_candidate
				NOT = { event_target:c1 = { character = PREV } }
				NOT = { event_target:c2 = { character = PREV } }
			}
			save_event_target_as = c3
		}
		on_campaign = {
			limit = {
				has_character_flag = pres_candidate
				NOT = { event_target:c1 = { character = PREV } }
				NOT = { event_target:c2 = { character = PREV } }
				NOT = { event_target:c3 = { character = PREV } }
			}
			save_event_target_as = c4
		}
		set_variable = { which = "c1_votes" value = 0 }
		set_variable = { which = "c2_votes" value = 0 }
		set_variable = { which = "c3_votes" value = 0 }
		set_variable = { which = "c4_votes" value = 0 }
		
		any_independent_ruler = {
			any_realm_character = {
				limit = {
					religion = americanist
					is_adult = yes
				}
				letter_event = { id = prez.92 }
			}
		}
		
		character_event = { id = prez.93 days = 1 } # Count votes
		character_event = { id = prez.98 days = 2 } # Cleanup
	}
}

# The ballot
letter_event = {
	id = prez.92
	desc = prez.92.desc
	#picture = GFX_evt_recieve_letter
	border = GFX_event_letter_frame_religion
	is_triggered_only = yes
	hide_from = yes
	
	option = {
		name = prez.92.optA
		trigger = {
			event_target:c1 = { always = yes }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				event_target:c1 = { is_friend = ROOT }
			}
			modifier = {
				factor = 0.01
				event_target:c1 = { is_rival = ROOT }
			}
			modifier = {
				factor = 0.2
				NOT = { event_target:c1 = { reverse_opinion = { who = ROOT value = -80 } } }
			}
			modifier = {
				factor = 0.4
				NOT = { event_target:c1 = { reverse_opinion = { who = ROOT value = -60 } } }
			}
			modifier = {
				factor = 0.6
				NOT = { event_target:c1 = { reverse_opinion = { who = ROOT value = -40 } } }
			}
			modifier = {
				factor = 0.8
				NOT = { event_target:c1 = { reverse_opinion = { who = ROOT value = -20 } } }
			}
			modifier = {
				factor = 1.2
				event_target:c1 = { reverse_opinion = { who = ROOT value = 20 } }
			}
			modifier = {
				factor = 1.4
				event_target:c1 = { reverse_opinion = { who = ROOT value = 40 } }
			}
			modifier = {
				factor = 1.6
				event_target:c1 = { reverse_opinion = { who = ROOT value = 60 } }
			}
			modifier = {
				factor = 1.8
				event_target:c1 = { reverse_opinion = { who = ROOT value = 80 } }
			}
			modifier = {
				factor = 0.9
				event_target:c1 = { NOT = { diplomacy = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c1 = { diplomacy = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c1 = { diplomacy = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c1 = { diplomacy = 25 }
			}
			modifier = {
				factor = 0.9
				event_target:c1 = { NOT = { learning = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c1 = { learning = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c1 = { learning = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c1 = { learning = 25 }
			}
			modifier = {
				factor = 1.1
				event_target:c1 = { realm_size = 15 }
			}
			modifier = {
				factor = 1.1
				event_target:c1 = { realm_size = 50 }
			}
			modifier = {
				factor = 1.1
				event_target:c1 = { piety = 250 }
			}
		}
		event_target:c1 = { custom_tooltip = { text = prez.92.tooltip } }
		hidden_tooltip = { FROM = { change_variable = { which = "c1_votes" value = 1 } } }
	}
	
	option = {
		name = prez.92.optB
		trigger = {
			event_target:c2 = { always = yes }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				event_target:c2 = { is_friend = ROOT }
			}
			modifier = {
				factor = 0.01
				event_target:c2 = { is_rival = ROOT }
			}
			modifier = {
				factor = 0.2
				NOT = { event_target:c2 = { reverse_opinion = { who = ROOT value = -80 } } }
			}
			modifier = {
				factor = 0.4
				NOT = { event_target:c2 = { reverse_opinion = { who = ROOT value = -60 } } }
			}
			modifier = {
				factor = 0.6
				NOT = { event_target:c2 = { reverse_opinion = { who = ROOT value = -40 } } }
			}
			modifier = {
				factor = 0.9
				NOT = { event_target:c2 = { reverse_opinion = { who = ROOT value = -20 } } }
			}
			modifier = {
				factor = 1.1
				event_target:c2 = { reverse_opinion = { who = ROOT value = 20 } }
			}
			modifier = {
				factor = 1.2
				event_target:c2 = { reverse_opinion = { who = ROOT value = 40 } }
			}
			modifier = {
				factor = 1.3
				event_target:c2 = { reverse_opinion = { who = ROOT value = 60 } }
			}
			modifier = {
				factor = 1.4
				event_target:c2 = { reverse_opinion = { who = ROOT value = 80 } }
			}
			modifier = {
				factor = 0.9
				event_target:c2 = { NOT = { diplomacy = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c2 = { diplomacy = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c2 = { diplomacy = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c2 = { diplomacy = 25 }
			}
			modifier = {
				factor = 0.9
				event_target:c2 = { NOT = { learning = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c2 = { learning = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c2 = { learning = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c2 = { learning = 25 }
			}
			modifier = {
				factor = 1.1
				event_target:c2 = { realm_size = 15 }
			}
			modifier = {
				factor = 1.1
				event_target:c2 = { realm_size = 50 }
			}
			modifier = {
				factor = 1.1
				event_target:c2 = { piety = 250 }
			}
		}
		event_target:c2 = { custom_tooltip = { text = prez.92.tooltip } }
		hidden_tooltip = { FROM = { change_variable = { which = "c2_votes" value = 1 } } }
	}
	
	option = {
		name = prez.92.optC
		trigger = {
			event_target:c3 = { always = yes }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				event_target:c3 = { is_friend = ROOT }
			}
			modifier = {
				factor = 0.01
				event_target:c3 = { is_rival = ROOT }
			}
			modifier = {
				factor = 0.2
				NOT = { event_target:c3 = { reverse_opinion = { who = ROOT value = -80 } } }
			}
			modifier = {
				factor = 0.4
				NOT = { event_target:c3 = { reverse_opinion = { who = ROOT value = -60 } } }
			}
			modifier = {
				factor = 0.6
				NOT = { event_target:c3 = { reverse_opinion = { who = ROOT value = -40 } } }
			}
			modifier = {
				factor = 0.8
				NOT = { event_target:c3 = { reverse_opinion = { who = ROOT value = -20 } } }
			}
			modifier = {
				factor = 1.2
				event_target:c3 = { reverse_opinion = { who = ROOT value = 20 } }
			}
			modifier = {
				factor = 1.4
				event_target:c3 = { reverse_opinion = { who = ROOT value = 40 } }
			}
			modifier = {
				factor = 1.6
				event_target:c3 = { reverse_opinion = { who = ROOT value = 60 } }
			}
			modifier = {
				factor = 1.8
				event_target:c3 = { reverse_opinion = { who = ROOT value = 80 } }
			}
			modifier = {
				factor = 0.9
				event_target:c3 = { NOT = { diplomacy = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c3 = { diplomacy = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c3 = { diplomacy = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c3 = { diplomacy = 25 }
			}
			modifier = {
				factor = 0.9
				event_target:c3 = { NOT = { learning = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c3 = { learning = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c3 = { learning = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c3 = { learning = 25 }
			}
			modifier = {
				factor = 1.1
				event_target:c3 = { realm_size = 15 }
			}
			modifier = {
				factor = 1.1
				event_target:c3 = { realm_size = 50 }
			}
			modifier = {
				factor = 1.1
				event_target:c3 = { piety = 250 }
			}
		}
		event_target:c3 = { custom_tooltip = { text = prez.92.tooltip } }
		hidden_tooltip = { FROM = { change_variable = { which = "c3_votes" value = 1 } } }
	}
	
	option = {
		name = prez.92.optD
		trigger = {
			event_target:c4 = { always = yes }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				event_target:c4 = { is_friend = ROOT }
			}
			modifier = {
				factor = 0.01
				event_target:c4 = { is_rival = ROOT }
			}
			modifier = {
				factor = 0.2
				NOT = { event_target:c4 = { reverse_opinion = { who = ROOT value = -80 } } }
			}
			modifier = {
				factor = 0.4
				NOT = { event_target:c4 = { reverse_opinion = { who = ROOT value = -60 } } }
			}
			modifier = {
				factor = 0.6
				NOT = { event_target:c4 = { reverse_opinion = { who = ROOT value = -40 } } }
			}
			modifier = {
				factor = 0.8
				NOT = { event_target:c4 = { reverse_opinion = { who = ROOT value = -20 } } }
			}
			modifier = {
				factor = 1.2
				event_target:c4 = { reverse_opinion = { who = ROOT value = 20 } }
			}
			modifier = {
				factor = 1.4
				event_target:c4 = { reverse_opinion = { who = ROOT value = 40 } }
			}
			modifier = {
				factor = 1.6
				event_target:c4 = { reverse_opinion = { who = ROOT value = 60 } }
			}
			modifier = {
				factor = 1.8
				event_target:c4 = { reverse_opinion = { who = ROOT value = 80 } }
			}
			modifier = {
				factor = 0.9
				event_target:c4 = { NOT = { diplomacy = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c4 = { diplomacy = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c4 = { diplomacy = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c4 = { diplomacy = 25 }
			}
			modifier = {
				factor = 0.9
				event_target:c4 = { NOT = { learning = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c4 = { learning = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c4 = { learning = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c4 = { learning = 25 }
			}
			modifier = {
				factor = 1.1
				event_target:c4 = { realm_size = 15 }
			}
			modifier = {
				factor = 1.1
				event_target:c4 = { realm_size = 50 }
			}
			modifier = {
				factor = 1.1
				event_target:c4 = { piety = 250 }
			}
		}
		event_target:c4 = { custom_tooltip = { text = prez.92.tooltip } }
		hidden_tooltip = { FROM = { change_variable = { which = "c4_votes" value = 1 } } }
	}
}

# Pick the winner
character_event = {
	id = prez.93
	desc = DEBUG
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		activate_title = { title = c_americanist status = yes }
	}
	
	option = {
		name = DEBUG
		trigger = {
			check_variable = { which = "c1_votes" which = "c2_votes" }
			check_variable = { which = "c1_votes" which = "c3_votes" }
			check_variable = { which = "c1_votes" which = "c4_votes" }
		}
		event_target:c1 = {
			c_americanist = { gain_title = PREV }
			save_event_target_as = winner
			narrative_event = { id = prez.94 }
		}
	}
	
	option = {
		name = DEBUG
		trigger = {
			check_variable = { which = "c2_votes" which = "c1_votes" }
			check_variable = { which = "c2_votes" which = "c3_votes" }
			check_variable = { which = "c2_votes" which = "c4_votes" }
		}
		event_target:c2 = {
			c_americanist = { gain_title = PREV }
			save_event_target_as = winner
			character_event = { id = prez.94 }
		}
	}
	
	option = {
		name = DEBUG
		trigger = {
			check_variable = { which = "c3_votes" which = "c1_votes" }
			check_variable = { which = "c3_votes" which = "c2_votes" }
			check_variable = { which = "c3_votes" which = "c4_votes" }
		}
		event_target:c3 = {
			c_americanist = { gain_title = PREV }
			save_event_target_as = winner
			character_event = { id = prez.94 }
		}
	}
	
	option = {
		name = DEBUG
		trigger = {
			check_variable = { which = "c4_votes" which = "c1_votes" }
			check_variable = { which = "c4_votes" which = "c2_votes" }
			check_variable = { which = "c4_votes" which = "c3_votes" }
		}
		event_target:c4 = {
			c_americanist = { gain_title = PREV }
			save_event_target_as = winner
			character_event = { id = prez.94 }
		}
	}
}

# Inform winner and make them President
narrative_event = {
	id = prez.94
	title = prez.94.name
	desc = {
		text = prez.94.desc1
		trigger = {
			NOT = { event_target:c2 = { always = yes } }
			NOT = { event_target:c3 = { always = yes } }
			NOT = { event_target:c4 = { always = yes } }
		}
	}
	desc = {
		text = prez.94.desc2
		trigger = {
			event_target:c2 = { always = yes }
			NOT = { event_target:c3 = { always = yes } }
			NOT = { event_target:c4 = { always = yes } }
		}
	}
	desc = {
		text = prez.94.desc3
		trigger = {
			event_target:c2 = { always = yes }
			event_target:c3 = { always = yes }
			NOT = { event_target:c4 = { always = yes } }
		}
	}
	desc = {
		text = prez.94.desc4
		trigger = {
			event_target:c2 = { always = yes }
			event_target:c3 = { always = yes }
			event_target:c4 = { always = yes }
		}
	}
	picture = GFX_evt_coronation
	border = GFX_event_narrative_frame_religion
	is_triggered_only = yes
	hide_from = yes
	
	option = {
		name = prez.94.optA
		c_americanist = { gain_title = PREV }
		prestige = 500
		add_trait = president
		set_character_flag = current_president
		if = {
			limit = { NOT = { dynasty = none } }
			give_nickname = nick_lastname
		}
		hidden_tooltip = {
			any_playable_ruler = {
				limit = { religion = americanist }
				character_event = { id = prez.95 }
			}
		}
	}
}

# Inform players of result
character_event = {
	id = prez.95
	desc = {
		text = prez.95.desc1
		trigger = {
			NOT = { event_target:c2 = { always = yes } }
			NOT = { event_target:c3 = { always = yes } }
			NOT = { event_target:c4 = { always = yes } }
		}
	}
	desc = {
		text = prez.95.desc2
		trigger = {
			event_target:c2 = { always = yes }
			NOT = { event_target:c3 = { always = yes } }
			NOT = { event_target:c4 = { always = yes } }
		}
	}
	desc = {
		text = prez.95.desc3
		trigger = {
			event_target:c2 = { always = yes }
			event_target:c3 = { always = yes }
			NOT = { event_target:c4 = { always = yes } }
		}
	}
	desc = {
		text = prez.95.desc4
		trigger = {
			event_target:c2 = { always = yes }
			event_target:c3 = { always = yes }
			event_target:c4 = { always = yes }
		}
	}
	picture = GFX_evt_coronation
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	
	option = {
		name = prez.95.optA
	}
}

# Cleanup event (all characters)
character_event = {
	id = prez.98
	desc = DEBUG
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		clr_global_flag = pres_election
		clr_global_flag = declare_candidacy
		d_electoral_college = { holder_scope = {
			diplomatic_immunity = no
			remove_trait = electoral_college
			set_variable = { which = num_candidates value = 0 }
		} }
		any_independent_ruler = {
			any_realm_character = {
				character_event = { id = prez.99 }
			}
		}
	}
	
	option = {
		name = DEBUG
	}
}

# Cleanup event (one character)
character_event = {
	id = prez.99
	desc = DEBUG
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		remove_trait = on_campaign
		clr_character_flag = pres_candidate
		clr_character_flag = vp_candidate
		clr_character_flag = dropped_out
	}
	
	option = {
		name = DEBUG
	}
}

################
# 100-199: Events for the President in power
################

# If the President loses all titles, hold a new election
character_event = {
	id = prez.105
	desc = DEBUG
	is_triggered_only = yes # Triggered from on_new_holder
	hide_window = yes
	
	trigger = {
		trait = president
		has_character_flag = current_president
		NOT = { has_landed_title = c_americanist }
	}
	
	option = {
		name = DEBUG
		character_event = { id = prez.1 }
	}
}

# President has to justify excommunicating someone
character_event = {
	id = prez.106
	desc = EVTDESC_prez_excomm
	picture = GFX_evt_rival_rulers
	is_triggered_only = yes
	
	immediate = {
		set_variable = { which = "indolence" value = 0 }
		set_variable = { which = "brutality" value = 0 }
		if = {
			limit = { FROM = { trait = hedonist } }
			change_variable = { which = "indolence" value = 1 }
		}
		if = {
			limit = { FROM = { trait = lustful } }
			change_variable = { which = "indolence" value = 1 }
		}
		if = {
			limit = { FROM = { trait = gluttonous } }
			change_variable = { which = "indolence" value = 1 }
		}
		if = {
			limit = { FROM = { trait = slothful } }
			change_variable = { which = "indolence" value = 1 }
		}
		if = {
			limit = { FROM = { trait = drunkard } }
			change_variable = { which = "indolence" value = 1 }
		}
		
		if = {
			limit = { FROM = { trait = impaler } }
			change_variable = { which = "brutality" value = 1 }
		}
		if = {
			limit = { FROM = { trait = wroth } }
			change_variable = { which = "brutality" value = 1 }
		}
		if = {
			limit = { FROM = { trait = cruel } }
			change_variable = { which = "brutality" value = 1 }
		}
		if = {
			limit = { FROM = { trait = arbitrary } }
			change_variable = { which = "brutality" value = 1 }
		}
		if = {
			limit = { FROM = { trait = lunatic } }
			change_variable = { which = "brutality" value = 1 }
		}
		if = {
			limit = { FROM = { trait = possessed } }
			change_variable = { which = "brutality" value = 1 }
		}
		
		if = {
			limit = { FROM = { NOT = { trait = kinslayer } } }
			FROM = {
				any_dynasty_member = {
					opinion = { modifier = disrespects_dynasty who = ROOT years = 3 }
				}
			}
		}
	}
	
	trigger = {
		has_landed_title = c_americanist
	}
	
	option = {
		name = EVTOPT_prez_excom_kinslay
		trigger = {
			FROM = {
				trait = kinslayer
			}
		}
		piety = 10
		ai_chance = { factor = 800 }
	}
	
	option = {
		name = EVTOPT_prez_excom_cruel
		trigger = { check_variable = { which = "brutality" value = 2 } }
		piety = 10
		ai_chance = { factor = 300 }
	}
	
	option = {
		name = EVTOPT_prez_excom_glutton
		trigger = { check_variable = { which = "indolence" value = 2 } }
		piety = 5
		ai_chance = { factor = 100 }
	}
	
	option = {
		name = EVTOPT_prez_excom_cynic
		trigger = {
			FROM = {
				trait = cynical
				NOT = { trait = pilgrim }
			}
		}
		piety = 5
		ai_chance = { factor = 200 }
	}
	
	option = {
		name = EVTOPT_prez_excom_intrigue
		trigger = { intrigue = 12 }
		tooltip_info = intrigue
		piety = -10
		ai_chance = { factor = 20 }
	}
	
	option = {
		name = EVTOPT_prez_excom_weak
		piety = -50
		religion_authority = { modifier = unjustified_excommunication }
		ai_chance = { factor = 1 }
	}
}

character_event = {
	id = prez.107
	desc = EVTDESC_prez_excomm_inform
	picture = GFX_evt_rival_rulers
	is_triggered_only = yes

	option = {
		name = OK
		prestige = -25
	}
}

# recently excommunicated character, send event to prez
character_event = {
	id = prez.108
	desc = DEBUG
	hide_window = yes
	
	religion = americanist
	
	trigger = {
		NOT = { has_landed_title = c_americanist }
		trait = excommunicated
		NOT = { has_character_flag = pres_justify_excommunication }
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		set_character_flag = pres_justify_excommunication
		religion_head = { character_event = { id = prez.106 } }
	}
	
	option = {
		name = OK
	}
}


# Americanist owner of Washington asked to give it up

# President is incapacitated, VP or First Lady can try to seize power



################
# 200-299: Election campaigning
################
# Killer of candidate loses public support - candidate dies
character_event = {
	id = prez.200
	desc = prez.200.desc
	picture = GFX_evt_shadow
	is_triggered_only = yes # Triggered by 10 (on_action_events)
	
	option = {
		name = prez.200.optA
		add_character_modifier = { name = murdered_candidate duration = 365 }
		hidden_tooltip = { 
			any_playable_ruler = {
				limit = { religion = americanist }
				character_event = { id = prez.201 }
			}
		}
	}
}

# Notify players
character_event = {
	id = prez.201
	desc = prez.201.desc
	picture = GFX_evt_shadow
	is_triggered_only = yes
	
	notification = yes
	
	option = {
		name = OK
	}
}

# Killer of candidate loses public support - candidate lives
character_event = {
	id = prez.202
	desc = prez.202.desc
	picture = GFX_evt_shadow
	is_triggered_only = yes # Triggered by 11 (on_action_events)
	
	option = {
		name = prez.200.optA
		add_character_modifier = { name = murdered_candidate duration = 365 }
		event_target:target_victim = {
			add_character_modifier = { name = sympathy_vote duration = 365 }
		}
		hidden_tooltip = { 
			any_playable_ruler = {
				limit = { religion = americanist }
				character_event = { id = prez.203 }
			}
		}
	}
}

# Notify players
character_event = {
	id = prez.203
	desc = prez.203.desc
	picture = GFX_evt_shadow
	is_triggered_only = yes
	
	notification = yes
	
	option = {
		name = OK
	}
}

# Apostates can't run
character_event = {
	id = prez.204
	desc = prez.204.desc
	picture = GFX_evt_bishop
	is_triggered_only = yes # Triggered by on_character_convert_religion
	
	trigger = {
		FROM = { religion = americanist }
		trait = on_campaign
	}
	
	option = {
		name = prez.204.optA
		hidden_tooltip = { character_event = { id = prez.8 } }
	}
}

##### OPINION POLLS
# event_target:candidate is the candidate who's commissioning the poll

# Beginning of chain
character_event = {
	id = prez.205
	desc = DEBUG
	is_triggered_only = yes # Triggered by decision hold_opinion_poll
	
	option = {
		name = DEBUG
		event_target:candidate = { save_event_target_as = c1 }
		on_campaign = {
			limit = {
				has_character_flag = pres_candidate
				NOT = { event_target:c1 = { character = PREV } }
			}
			save_event_target_as = c2
		}
		on_campaign = {
			limit = {
				has_character_flag = pres_candidate
				NOT = { event_target:c1 = { character = PREV } }
				NOT = { event_target:c2 = { character = PREV } }
			}
			save_event_target_as = c3
		}
		on_campaign = {
			limit = {
				has_character_flag = pres_candidate
				NOT = { event_target:c1 = { character = PREV } }
				NOT = { event_target:c2 = { character = PREV } }
				NOT = { event_target:c3 = { character = PREV } }
			}
			save_event_target_as = c4
		}
		event_target:candidate = {
			set_variable = { which = "c1_votes" value = 0 }
			set_variable = { which = "c2_votes" value = 0 }
			set_variable = { which = "c3_votes" value = 0 }
			set_variable = { which = "c4_votes" value = 0 }
			clr_character_flag = 1st_place
			clr_character_flag = 2nd_place
			clr_character_flag = 3rd_place
			clr_character_flag = 4th_place
			character_event = { id = prez.208 days = 1 }
		}
		
		any_independent_ruler = {
			any_realm_character = {
				limit = {
					religion = americanist
					is_adult = yes
					ai = yes
				}
				character_event = { id = prez.207 }
			}
		}
	}
}

# Ask who they're going to vote for
character_event = {
	id = prez.207
	desc = DEBUG
	is_triggered_only = yes
	
	option = {
		name = DEBUG
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				event_target:c1 = { is_friend = ROOT }
			}
			modifier = {
				factor = 0.01
				event_target:c1 = { is_rival = ROOT }
			}
			modifier = {
				factor = 0.2
				NOT = { event_target:c1 = { reverse_opinion = { who = ROOT value = -80 } } }
			}
			modifier = {
				factor = 0.4
				NOT = { event_target:c1 = { reverse_opinion = { who = ROOT value = -60 } } }
			}
			modifier = {
				factor = 0.6
				NOT = { event_target:c1 = { reverse_opinion = { who = ROOT value = -40 } } }
			}
			modifier = {
				factor = 0.8
				NOT = { event_target:c1 = { reverse_opinion = { who = ROOT value = -20 } } }
			}
			modifier = {
				factor = 1.2
				event_target:c1 = { reverse_opinion = { who = ROOT value = 20 } }
			}
			modifier = {
				factor = 1.4
				event_target:c1 = { reverse_opinion = { who = ROOT value = 40 } }
			}
			modifier = {
				factor = 1.6
				event_target:c1 = { reverse_opinion = { who = ROOT value = 60 } }
			}
			modifier = {
				factor = 1.8
				event_target:c1 = { reverse_opinion = { who = ROOT value = 80 } }
			}
			modifier = {
				factor = 0.9
				event_target:c1 = { NOT = { diplomacy = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c1 = { diplomacy = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c1 = { diplomacy = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c1 = { diplomacy = 25 }
			}
			modifier = {
				factor = 0.9
				event_target:c1 = { NOT = { learning = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c1 = { learning = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c1 = { learning = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c1 = { learning = 25 }
			}
			modifier = {
				factor = 1.1
				event_target:c1 = { realm_size = 15 }
			}
			modifier = {
				factor = 1.1
				event_target:c1 = { realm_size = 50 }
			}
			modifier = {
				factor = 1.1
				event_target:c1 = { piety = 250 }
			}
		}
		event_target:candidate = { change_variable = { which = "c1_votes" value = 1 } }
	}
	
	option = {
		name = DEBUG
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				event_target:c2 = { is_friend = ROOT }
			}
			modifier = {
				factor = 0.01
				event_target:c2 = { is_rival = ROOT }
			}
			modifier = {
				factor = 0.2
				NOT = { event_target:c2 = { reverse_opinion = { who = ROOT value = -80 } } }
			}
			modifier = {
				factor = 0.4
				NOT = { event_target:c2 = { reverse_opinion = { who = ROOT value = -60 } } }
			}
			modifier = {
				factor = 0.6
				NOT = { event_target:c2 = { reverse_opinion = { who = ROOT value = -40 } } }
			}
			modifier = {
				factor = 0.9
				NOT = { event_target:c2 = { reverse_opinion = { who = ROOT value = -20 } } }
			}
			modifier = {
				factor = 1.1
				event_target:c2 = { reverse_opinion = { who = ROOT value = 20 } }
			}
			modifier = {
				factor = 1.2
				event_target:c2 = { reverse_opinion = { who = ROOT value = 40 } }
			}
			modifier = {
				factor = 1.3
				event_target:c2 = { reverse_opinion = { who = ROOT value = 60 } }
			}
			modifier = {
				factor = 1.4
				event_target:c2 = { reverse_opinion = { who = ROOT value = 80 } }
			}
			modifier = {
				factor = 0.9
				event_target:c2 = { NOT = { diplomacy = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c2 = { diplomacy = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c2 = { diplomacy = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c2 = { diplomacy = 25 }
			}
			modifier = {
				factor = 0.9
				event_target:c2 = { NOT = { learning = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c2 = { learning = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c2 = { learning = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c2 = { learning = 25 }
			}
			modifier = {
				factor = 1.1
				event_target:c2 = { realm_size = 15 }
			}
			modifier = {
				factor = 1.1
				event_target:c2 = { realm_size = 50 }
			}
			modifier = {
				factor = 1.1
				event_target:c2 = { piety = 250 }
			}
		}
		event_target:candidate = { change_variable = { which = "c2_votes" value = 1 } }
	}
	
	option = {
		name = DEBUG
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				event_target:c3 = { is_friend = ROOT }
			}
			modifier = {
				factor = 0.01
				event_target:c3 = { is_rival = ROOT }
			}
			modifier = {
				factor = 0.2
				NOT = { event_target:c3 = { reverse_opinion = { who = ROOT value = -80 } } }
			}
			modifier = {
				factor = 0.4
				NOT = { event_target:c3 = { reverse_opinion = { who = ROOT value = -60 } } }
			}
			modifier = {
				factor = 0.6
				NOT = { event_target:c3 = { reverse_opinion = { who = ROOT value = -40 } } }
			}
			modifier = {
				factor = 0.8
				NOT = { event_target:c3 = { reverse_opinion = { who = ROOT value = -20 } } }
			}
			modifier = {
				factor = 1.2
				event_target:c3 = { reverse_opinion = { who = ROOT value = 20 } }
			}
			modifier = {
				factor = 1.4
				event_target:c3 = { reverse_opinion = { who = ROOT value = 40 } }
			}
			modifier = {
				factor = 1.6
				event_target:c3 = { reverse_opinion = { who = ROOT value = 60 } }
			}
			modifier = {
				factor = 1.8
				event_target:c3 = { reverse_opinion = { who = ROOT value = 80 } }
			}
			modifier = {
				factor = 0.9
				event_target:c3 = { NOT = { diplomacy = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c3 = { diplomacy = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c3 = { diplomacy = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c3 = { diplomacy = 25 }
			}
			modifier = {
				factor = 0.9
				event_target:c3 = { NOT = { learning = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c3 = { learning = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c3 = { learning = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c3 = { learning = 25 }
			}
			modifier = {
				factor = 1.1
				event_target:c3 = { realm_size = 15 }
			}
			modifier = {
				factor = 1.1
				event_target:c3 = { realm_size = 50 }
			}
			modifier = {
				factor = 1.1
				event_target:c3 = { piety = 250 }
			}
		}
		event_target:candidate = { change_variable = { which = "c3_votes" value = 1 } }
	}
	
	option = {
		name = DEBUG
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				event_target:c4 = { is_friend = ROOT }
			}
			modifier = {
				factor = 0.01
				event_target:c4 = { is_rival = ROOT }
			}
			modifier = {
				factor = 0.2
				NOT = { event_target:c4 = { reverse_opinion = { who = ROOT value = -80 } } }
			}
			modifier = {
				factor = 0.4
				NOT = { event_target:c4 = { reverse_opinion = { who = ROOT value = -60 } } }
			}
			modifier = {
				factor = 0.6
				NOT = { event_target:c4 = { reverse_opinion = { who = ROOT value = -40 } } }
			}
			modifier = {
				factor = 0.8
				NOT = { event_target:c4 = { reverse_opinion = { who = ROOT value = -20 } } }
			}
			modifier = {
				factor = 1.2
				event_target:c4 = { reverse_opinion = { who = ROOT value = 20 } }
			}
			modifier = {
				factor = 1.4
				event_target:c4 = { reverse_opinion = { who = ROOT value = 40 } }
			}
			modifier = {
				factor = 1.6
				event_target:c4 = { reverse_opinion = { who = ROOT value = 60 } }
			}
			modifier = {
				factor = 1.8
				event_target:c4 = { reverse_opinion = { who = ROOT value = 80 } }
			}
			modifier = {
				factor = 0.9
				event_target:c4 = { NOT = { diplomacy = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c4 = { diplomacy = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c4 = { diplomacy = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c4 = { diplomacy = 25 }
			}
			modifier = {
				factor = 0.9
				event_target:c4 = { NOT = { learning = 10 } }
			}
			modifier = {
				factor = 1.1
				event_target:c4 = { learning = 15 }
			}
			modifier = {
				factor = 1.2
				event_target:c4 = { learning = 20 }
			}
			modifier = {
				factor = 1.3
				event_target:c4 = { learning = 25 }
			}
			modifier = {
				factor = 1.1
				event_target:c4 = { realm_size = 15 }
			}
			modifier = {
				factor = 1.1
				event_target:c4 = { realm_size = 50 }
			}
			modifier = {
				factor = 1.1
				event_target:c4 = { piety = 250 }
			}
		}
		event_target:candidate = { change_variable = { which = "c4_votes" value = 1 } }
	}
}

# Report results, and set flags for AI
character_event = {
	id = prez.208
	desc = prez.208.desc
	picture = GFX_evt_recieve_letter
	is_triggered_only = yes
	hide_from = yes
	
	option = {
		name = prez.208.optA
		trigger = { ai = no }
		event_target:c1 = { custom_tooltip = { text = c1votes } }
		event_target:c2 = { custom_tooltip = { text = c2votes } }
		event_target:c3 = { custom_tooltip = { text = c3votes } }
		event_target:c4 = { custom_tooltip = { text = c4votes } }
	}
	
	option = {
		name = DEBUG
		trigger = {
			ai = yes
			check_variable = { which = "c1_votes" which = "c2_votes" }
			check_variable = { which = "c1_votes" which = "c3_votes" }
			check_variable = { which = "c1_votes" which = "c4_votes" }
		}
		set_character_flag = 1st_place
	}
	
	option = {
		name = DEBUG
		trigger = {
			ai = yes
			OR = {
				AND = {
					check_variable = { which = "c1_votes" which = "c2_votes" }
					check_variable = { which = "c1_votes" which = "c3_votes" }
					NOT = { check_variable = { which = "c1_votes" which = "c4_votes" } }
				}
				AND = {
					NOT = { check_variable = { which = "c1_votes" which = "c2_votes" } }
					check_variable = { which = "c1_votes" which = "c3_votes" }
					check_variable = { which = "c1_votes" which = "c4_votes" }
				}
				AND = {
					check_variable = { which = "c1_votes" which = "c2_votes" }
					NOT = { check_variable = { which = "c1_votes" which = "c3_votes" } }
					check_variable = { which = "c1_votes" which = "c4_votes" }
				}
			}
		}
		set_character_flag = 2nd_place
	}
	
	option = {
		name = DEBUG
		trigger = {
			ai = yes
			OR = {
				AND = {
					check_variable = { which = "c1_votes" which = "c2_votes" }
					NOT = { check_variable = { which = "c1_votes" which = "c3_votes" } }
					NOT = { check_variable = { which = "c1_votes" which = "c4_votes" } }
				}
				AND = {
					NOT = { check_variable = { which = "c1_votes" which = "c2_votes" } }
					check_variable = { which = "c1_votes" which = "c3_votes" }
					NOT = { check_variable = { which = "c1_votes" which = "c4_votes" } }
				}
				AND = {
					NOT = { check_variable = { which = "c1_votes" which = "c2_votes" } }
					NOT = { check_variable = { which = "c1_votes" which = "c3_votes" } }
					check_variable = { which = "c1_votes" which = "c4_votes" }
				}
			}
		}
		set_character_flag = 3rd_place
	}
	
	option = {
		name = DEBUG
		trigger = {
			ai = yes
			NOT = { check_variable = { which = "c1_votes" which = "c2_votes" } }
			NOT = { check_variable = { which = "c1_votes" which = "c3_votes" } } 
			NOT = { check_variable = { which = "c1_votes" which = "c4_votes" } }
		}
		set_character_flag = 4th_place
	}
}

#### ATTACK HERALDS
# FROM is the target, FROMFROM is the attacker

# Attack fails, caught
character_event = {
	id = prez.210
	desc = {
		text = attack_herald_cynical_fail_caught
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = cynical
					trait = mystic
					NOT = { piety = 0 }
				}
			}
		}
	}
	desc = {
		text = attack_herald_craven_fail_caught
		trigger = {
			event_target:ctarget = {
				trait = craven
			}
		}
	}
	desc = {
		text = attack_herald_lunatic_fail_caught
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = lunatic
					trait = possessed
					trait = depressed
					trait = stressed
				}
			}
		}
	}
	desc = {
		text = attack_herald_lustful_fail_caught
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = lustful
					trait = seducer
					trait = seductress
					trait = hedonist
					trait = homosexual
					any_child = {
						OR = {
							trait = bastard
							trait = legit_bastard
						}
					}
				}
			}
		}
	}
	desc = {
		text = attack_herald_deceitful_fail_caught
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = paranoid
					trait = deceitful
					trait = schemer
				}
			}
		}
	}
	desc = {
		text = attack_herald_arbitrary_fail_caught
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = arbitrary
					trait = cruel
					trait = impaler
				}
			}
		}
	}
	desc = {
		text = attack_herald_trusting_fail_caught
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = trusting
					trait = kind
				}
			}
		}
	}
	desc = {
		text = attack_herald_cursed_fail_caught
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = dwarf
					trait = ugly
					trait = harelip
					trait = hunchback
					trait = clubfooted
					trait = lisp
					trait = stutter
					trait = slow
					trait = imbecile
					trait = inbred
					trait = weak
				}
			}
		}
	}
	desc = {
		text = attack_herald_generic_fail_caught
	}
	is_triggered_only = yes
	notification = yes
	show_from_from = yes

	immediate = {
		event_target:cattacker = { reverse_opinion = { who = ROOT modifier = negative_campaign years = 2 } }
		event_target:cattacker = {
			event_target:ctarget = {
				opinion = { who = PREV modifier = attacked_me years = 2 }
			}
		}
	}
	
	option = {
		name = OK
	}
}

# Attack fails, not caught
character_event = {
	id = prez.211
	desc = {
		text = attack_herald_cynical_fail
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = cynical
					trait = mystic
					NOT = { piety = 0 }
				}
			}
		}
	}
	desc = {
		text = attack_herald_craven_fail
		trigger = {
			event_target:ctarget = {
				trait = craven
			}
		}
	}
	desc = {
		text = attack_herald_lunatic_fail
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = lunatic
					trait = possessed
					trait = depressed
					trait = stressed
				}
			}
		}
	}
	desc = {
		text = attack_herald_lustful_fail
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = lustful
					trait = seducer
					trait = seductress
					trait = hedonist
					trait = homosexual
					any_child = {
						OR = {
							trait = bastard
							trait = legit_bastard
						}
					}
				}
			}
		}
	}
	desc = {
		text = attack_herald_deceitful_fail
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = paranoid
					trait = deceitful
					trait = schemer
				}
			}
		}
	}
	desc = {
		text = attack_herald_arbitrary_fail
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = arbitrary
					trait = cruel
					trait = impaler
				}
			}
		}
	}
	desc = {
		text = attack_herald_trusting_fail
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = trusting
					trait = kind
				}
			}
		}
	}
	desc = {
		text = attack_herald_cursed_fail
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = dwarf
					trait = ugly
					trait = harelip
					trait = hunchback
					trait = clubfooted
					trait = lisp
					trait = stutter
					trait = slow
					trait = imbecile
					trait = inbred
					trait = weak
				}
			}
		}
	}
	desc = {
		text = attack_herald_generic_fail
	}
	is_triggered_only = yes
	notification = yes
	
	option = {
		name = OK
	}
}

# Attack succeeds, caught
character_event = {
	id = prez.212
	desc = {
		text = attack_herald_cynical_succ_caught
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = cynical
					trait = mystic
					NOT = { piety = 0 }
				}
			}
		}
	}
	desc = {
		text = attack_herald_craven_succ_caught
		trigger = {
			event_target:ctarget = {
				trait = craven
			}
		}
	}
	desc = {
		text = attack_herald_lunatic_succ_caught
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = lunatic
					trait = possessed
					trait = depressed
					trait = stressed
				}
			}
		}
	}
	desc = {
		text = attack_herald_lustful_succ_caught
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = lustful
					trait = seducer
					trait = seductress
					trait = hedonist
					trait = homosexual
					any_child = {
						OR = {
							trait = bastard
							trait = legit_bastard
						}
					}
				}
			}
		}
	}
	desc = {
		text = attack_herald_deceitful_succ_caught
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = paranoid
					trait = deceitful
					trait = schemer
				}
			}
		}
	}
	desc = {
		text = attack_herald_arbitrary_succ_caught
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = arbitrary
					trait = cruel
					trait = impaler
				}
			}
		}
	}
	desc = {
		text = attack_herald_trusting_succ_caught
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = trusting
					trait = kind
				}
			}
		}
	}
	desc = {
		text = attack_herald_cursed_succ_caught
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = dwarf
					trait = ugly
					trait = harelip
					trait = hunchback
					trait = clubfooted
					trait = lisp
					trait = stutter
					trait = slow
					trait = imbecile
					trait = inbred
					trait = weak
				}
			}
		}
	}
	desc = {
		text = attack_herald_generic_succ_caught
	}
	is_triggered_only = yes
	notification = yes
	show_from_from = yes

	immediate = {
		event_target:cattacker = { reverse_opinion = { who = ROOT modifier = negative_campaign years = 2 } }
		event_target:ctarget = { reverse_opinion = { who = ROOT modifier = attack_heralds years = 2 } }
		event_target:cattacker = {
			event_target:ctarget = {
				opinion = { who = PREV modifier = attacked_me years = 2 }
			}
		}
	}
	
	option = {
		name = OK
	}
}

# Attack succeeds, not caught
character_event = {
	id = prez.213
	desc = {
		text = attack_herald_cynical_succ
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = cynical
					trait = mystic
					NOT = { piety = 0 }
				}
			}
		}
	}
	desc = {
		text = attack_herald_craven_succ
		trigger = {
			event_target:ctarget = {
				trait = craven
			}
		}
	}
	desc = {
		text = attack_herald_lunatic_succ
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = lunatic
					trait = possessed
					trait = depressed
					trait = stressed
				}
			}
		}
	}
	desc = {
		text = attack_herald_lustful_succ
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = lustful
					trait = seducer
					trait = seductress
					trait = hedonist
					trait = homosexual
					any_child = {
						OR = {
							trait = bastard
							trait = legit_bastard
						}
					}
				}
			}
		}
	}
	desc = {
		text = attack_herald_deceitful_succ
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = paranoid
					trait = deceitful
					trait = schemer
				}
			}
		}
	}
	desc = {
		text = attack_herald_arbitrary_succ
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = arbitrary
					trait = cruel
					trait = impaler
				}
			}
		}
	}
	desc = {
		text = attack_herald_trusting_succ
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = trusting
					trait = kind
				}
			}
		}
	}
	desc = {
		text = attack_herald_cursed_succ
		trigger = {
			event_target:ctarget = {
				OR = {
					trait = dwarf
					trait = ugly
					trait = harelip
					trait = hunchback
					trait = clubfooted
					trait = lisp
					trait = stutter
					trait = slow
					trait = imbecile
					trait = inbred
					trait = weak
				}
			}
		}
	}
	desc = {
		text = attack_herald_generic_succ
	}
	is_triggered_only = yes
	notification = yes

	immediate = {
		event_target:ctarget = { reverse_opinion = { who = ROOT modifier = attack_heralds years = 2 } }
	}
	
	option = {
		name = OK
	}
}

# strip all claims on the presidency
character_event = {
	id = prez.300
	desc = DEBUG
	hide_window = yes
	
	trigger = {
		NOT = { has_landed_title = c_americanist }
		has_claim = c_americanist
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	immediate = {
		remove_claim = c_americanist
	}
	
	option = {
		name = OK
	}
}